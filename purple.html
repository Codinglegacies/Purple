<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíñ Valentine?</title>

<style>
  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #7b2ff7, #ff6fd8); /* purple ‚Üí pink */
    font-family: "Poppins", Arial, sans-serif;
  }

  /* Floating hearts */
  .heart {
    position: absolute;
    bottom: -20px;
    font-size: 20px;
    animation: floatUp 6s linear infinite;
    opacity: 0.9;
    text-shadow: 0 6px 20px rgba(123,47,247,0.18);
    pointer-events: none;
  }

  @keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-120vh) scale(1.5); opacity: 0; }
  }

  .card {
    background: rgba(250,240,255,0.95); /* soft, slightly purple-tinted white */
    padding: 35px 30px;
    border-radius: 28px;
    box-shadow: 0 25px 50px rgba(123,47,247,0.18);
    text-align: center;
    max-width: 330px;
    position: relative;
    z-index: 2;
  }

  .emoji {
    font-size: 60px;
    animation: bounce 2s infinite;
    filter: drop-shadow(0 6px 8px rgba(255,111,216,0.18));
  }

  @keyframes bounce {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }

  h1 {
    font-size: 22px;
    margin: 15px 0;
    color: #3a0f4a; /* deep purple */
  }

  p {
    font-size: 15px;
    color: #624b6a;
    margin-bottom: 25px;
  }

  button {
    font-size: 15px;
    padding: 11px 22px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: 0.2s ease;
  }

  #yes {
    background: linear-gradient(90deg,#9b59ff,#ff6fd8);
    color: white;
    margin-right: 10px;
    box-shadow: 0 10px 20px rgba(155,89,255,0.28);
  }

  #yes:hover {
    transform: scale(1.08);
  }

  #no {
    background: #efe3fb;
    color: #4b2a67;
    position: absolute;
  }

  /* Background video (hidden until played) */
  #bgVideo {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
    pointer-events: none;
    filter: brightness(0.6);
  }

  /* Small responsive tweak so moving button stays inside card on narrow screens */
  @media (max-width:380px) {
    .card { padding: 28px 20px; max-width: 92%; }
    .emoji { font-size: 52px; }
  }
</style>
</head>

<body>

<div class="card" id="card">
  <div class="emoji">üíú</div>
  <h1>Nirali, will you be my Valentine?</h1>
  <p>From my heart to this screen‚Ä¶ just one question üíó</p>

  <button id="yes" onclick="sayYes()">Yes üíñ</button>
  <button id="no" onmouseover="moveNo()">No üôà</button>
</div>

<audio id="yaySound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-happy-pop-2062.mp3" type="audio/mpeg">
</audio>

<script>
  /* Move No button */
  function moveNo() {
    const noBtn = document.getElementById("no");
    const card = document.getElementById("card");

    const maxX = card.clientWidth - noBtn.offsetWidth;
    const maxY = card.clientHeight - noBtn.offsetHeight;

    noBtn.style.left = Math.random() * maxX + "px";
    noBtn.style.top = Math.random() * maxY + "px";
  }

  /* Floating hearts generator */
  setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = ["üíú","üíñ","üíó","üíï"][Math.floor(Math.random()*4)];
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = Math.random() * 20 + 15 + "px";
    heart.style.animationDuration = Math.random() * 3 + 4 + "s";
    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 7000);
  }, 300);

  /* YES clicked */
  function sayYes() {
    const yay = document.getElementById("yaySound");
    if (yay) try { yay.play(); } catch (e) {}

    // Use local Desktop video file provided by the user (add .mp4 if missing)
    // video is in Desktop\break and named 'dance' (add extension if missing)
    let userFile = "break/dance"; // folder 'break' relative to Desktop
    if (!/\.[a-zA-Z0-9]{1,5}$/.test(userFile)) userFile += ".mp4";
    let videoSrc = '';
    if (location.protocol === 'file:') {
      // when opened via file://, build an absolute file URL relative to this HTML
      const base = location.href.substring(0, location.href.lastIndexOf('/')+1);
      videoSrc = base + userFile; // e.g. file:///C:/Users/HP/Desktop/dance.mp4
    } else {
      // try relative path (works when served from same folder)
      videoSrc = './' + userFile;
    }

    function toDirectDriveUrl(src) {
      try {
        // handle formats like: https://drive.google.com/file/d/FILEID/view?usp=sharing
        let m = src.match(/\/d\/([a-zA-Z0-9_-]+)/);
        if (m && m[1]) return `https://drive.google.com/uc?export=download&id=${m[1]}`;
        // handle ?id=FILEID
        m = src.match(/[?&]id=([a-zA-Z0-9_-]+)/);
        if (m && m[1]) return `https://drive.google.com/uc?export=download&id=${m[1]}`;
      } catch (e) {}
      return src;
    }

    videoSrc = toDirectDriveUrl(videoSrc);

    // Fallback public MP4 (small sample) if provided src fails
    const fallback = 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4';

    // Create and append background video (muted so autoplay works)
    const existing = document.getElementById('bgVideo');
    if (!existing) {
      const video = document.createElement('video');
      video.id = 'bgVideo';
      video.src = videoSrc;
      video.autoplay = true;
      video.loop = true;
      video.muted = true; // required for autoplay in many browsers
      video.playsInline = true;
      video.setAttribute('aria-hidden', 'true');
      video.style.opacity = '1';
      document.body.appendChild(video);

      // show a small unmute button once the overlay is visible
      const unmuteBtn = document.createElement('button');
      unmuteBtn.id = 'unmuteBtn';
      unmuteBtn.textContent = 'Unmute';
      unmuteBtn.style.position = 'fixed';
      unmuteBtn.style.right = '18px';
      unmuteBtn.style.bottom = '18px';
      unmuteBtn.style.zIndex = '3';
      unmuteBtn.style.padding = '10px 14px';
      unmuteBtn.style.borderRadius = '20px';
      unmuteBtn.style.border = 'none';
      unmuteBtn.style.background = 'rgba(0,0,0,0.5)';
      unmuteBtn.style.color = 'white';
      unmuteBtn.style.cursor = 'pointer';
      unmuteBtn.style.display = 'none';
      document.body.appendChild(unmuteBtn);

      unmuteBtn.addEventListener('click', () => {
        if (video.muted) {
          video.muted = false;
          unmuteBtn.textContent = 'Mute';
        } else {
          video.muted = true;
          unmuteBtn.textContent = 'Unmute';
        }
      });

      // If video fails to load, try fallback
      video.addEventListener('error', () => {
        console.warn('Video failed to load, attempting fallback.');
        video.src = fallback;
        video.load();
        video.play().catch(()=>{});
        // update manual link if overlay already exists
        const link = document.getElementById('videoLink');
        if (link) {
          link.href = video.src;
          link.textContent = video.src.length>40?video.src.slice(0,40)+'...':video.src;
        }
      });

      // When video can play, reveal unmute control
      video.addEventListener('canplay', () => {
        const btn = document.getElementById('unmuteBtn');
        if (btn) btn.style.display = 'block';
      });

      // attempt to play (some browsers require user gesture which we already have on click)
      video.play().catch((err)=>{
        console.warn('Autoplay prevented:', err);
      });
    }

    // Remove the card and show a centered overlay message above the video
    const card = document.getElementById('card');
    if (card) card.remove();

    const overlay = document.createElement('div');
    overlay.style.height = '100vh';
    overlay.style.display = 'flex';
    overlay.style.justifyContent = 'center';
    overlay.style.alignItems = 'center';
    overlay.style.flexDirection = 'column';
    overlay.style.color = 'white';
    overlay.style.fontFamily = 'Poppins, Arial';
    overlay.style.textAlign = 'center';
    overlay.style.padding = '20px';
    overlay.style.position = 'relative';
    overlay.style.zIndex = '2';
    overlay.innerHTML = `
      <h1 style="font-size:42px;margin:0 0 12px;">YAYYYY üéâüíñ</h1>
      <p style="font-size:18px;max-width:520px;line-height:1.4;margin:0;">
        You just made me the happiest person alive ü•π‚ù§Ô∏è<br><br>
        I‚Äôm really glad it‚Äôs you.
      </p>
      <p style="margin-top:18px;font-size:13px;opacity:0.9;">If the video doesn't play, open it in a new tab:</p>
      <a id="videoLink" href="" target="_blank" rel="noopener" style="color:rgba(255,255,255,0.95);text-decoration:underline;margin-top:6px;"></a>
    `;

    document.body.appendChild(overlay);

    // set link href for manual open (use actual video element src if available)
    const link = document.getElementById('videoLink');
    const vidElem = document.getElementById('bgVideo');
    const actualSrc = (vidElem && vidElem.src) ? vidElem.src : (videoSrc || fallback);
    if (link) link.href = actualSrc;
    if (link) link.textContent = (actualSrc && actualSrc.length>40) ? actualSrc.slice(0,40)+'...' : actualSrc;
  }
</script>

</body>
</html>
